<html><head>
<script>
//this function gets called every time req changes status, because it
//was registered above in submit_data
var statustext;
function processReqChange () {
  if (req == 0) {
      return false;
      }   
  //let user know what's up
  alert("readystate: " + req.readyState);
  if (req.readyState == 1) {
  }   
  else if (req.readyState == 2) {
    statustext.innerHTML = "Loaded update request...";
  } 
  else if (req.readyState == 3) {
      statustext.innerHTML = req.responseText;
  }
  else if (req.readyState == 4) {
    if (req.status == 200) {
    	//success!
	statustext.innerHTML = req.responseText;
    }
      else {
      //didn't get back a normal HTML response
      statustext.innerHTML = 
	"There was an error communicating with the server: " + req.status + 
	": " + req.responseText;
    }
  }
  }

function send_req_data() {
  req.send("a=janak&");
  req.send("\nagain\n");
}
</script>
</head>
<body>
<p id='status'>hello</p>

<input type=submit value='try' onclick='send_req_data();'>
<script>
var statustext = document.getElementById('status');
  req = new XMLHttpRequest();
  //register handler, so when something happens, we know.  function below
  req.onreadystatechange = processReqChange;
  req.open("POST",'test_bidirect.cgi',true);
  req.setRequestHeader("Content-type","application/x-www-form-urlencoded");
</script>
</body>
</html>